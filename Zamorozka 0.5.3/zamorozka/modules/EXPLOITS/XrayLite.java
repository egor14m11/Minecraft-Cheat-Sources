package zamorozka.modules.EXPLOITS;

import java.awt.Color;

import java.util.ArrayList;
import java.util.Random;

import org.lwjgl.opengl.GL11;


import de.Hero.settings.Setting;
import net.minecraft.block.Block;
import net.minecraft.client.entity.EntityPlayerSP;
import net.minecraft.client.renderer.RenderGlobal;
import net.minecraft.client.renderer.entity.RenderGuardian;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.network.play.client.CPacketPlayerDigging.Action;
import net.minecraft.tileentity.TileEntityChest;
import net.minecraft.tileentity.TileEntityEndPortal;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.math.AxisAlignedBB;
import net.minecraft.util.math.BlockPos;
import zamorozka.main.Zamorozka;
import zamorozka.module.Category;
import zamorozka.module.Module;
import zamorozka.ui.ChatUtils;
import zamorozka.ui.RenderUtil;
import zamorozka.ui.RenderUtils;
import zamorozka.ui.RenderUtils2;
import zamorozka.ui.XrayUtils;

public class XrayLite extends Module{
	
	public ArrayList<Block> xrayBlocks = new ArrayList<Block>();
	
	public XrayLite(){
		super("XrayLite", 0, Category.Exploits);
	}
    @Override
    public void setup() {
        Zamorozka.settingsManager.rSetting(new Setting("IronOre", this, true));
        Zamorozka.settingsManager.rSetting(new Setting("GoldOre", this, false));
        Zamorozka.settingsManager.rSetting(new Setting("DimondOre", this, false));
        Zamorozka.settingsManager.rSetting(new Setting("XraySize", this, 15, 0, 360, true));
        Zamorozka.settingsManager.rSetting(new Setting("XrayTime", this, 20, 0, 500, true));
    }
    private int xPos;
    private int yPos;
    private int zPos;
    private int timed = 0;
    private static int radius = 30;
    public static ArrayList<BlockPos> blocklist1 = new ArrayList<BlockPos>();
    public static ArrayList<BlockPos> blocklist2 = new ArrayList<BlockPos>();
    public static ArrayList<BlockPos> blocklist3 = new ArrayList<BlockPos>();
    public void onRender()
    {
        if (this.getState())
        {
	        	if((blocklist1.size()+blocklist2.size()+blocklist3.size())<Zamorozka.settingsManager.getSettingByName("XraySize").getValDouble()){
	            	for(int x = - radius; x < radius; x++) {
	            		for(int y = radius; y > - radius; y--) {
	            			for(int z = - radius; z < radius; z++) {
	            				this.xPos = (int)mc.player.posX + x;
	            				this.yPos = (int)mc.player.posY + y;
	            				this.zPos = (int)mc.player.posZ + z;
	            				
	            				BlockPos blockPos = new BlockPos(this.xPos, this.yPos, this.zPos);
	            				Block block = mc.world.getBlockState(blockPos).getBlock();
	            				  final Random random = new Random();
	            				  
	            				  float x1=random.nextFloat() * 2F;
	            				  float y1=random.nextFloat() * 2F;
	            				  float z1=random.nextFloat() * 2F;
	            				
	              				BlockPos blockPos1 = new BlockPos(this.xPos+x1, this.yPos+y1, this.zPos+z1);
	            				Block block1 = mc.world.getBlockState(blockPos1).getBlock();
	            				
	            				BlockPos blockPos2 = new BlockPos(blockPos.getX(), blockPos.getY(), blockPos.getZ()+1);
	            				Block block2 = mc.world.getBlockState(blockPos2).getBlock();
	            				
	            				BlockPos blockPos3 = new BlockPos(blockPos.getX()+1, blockPos.getY(), blockPos.getZ());
	            				Block block3 = mc.world.getBlockState(blockPos3).getBlock();

	            				BlockPos blockPos4 = new BlockPos(blockPos.getX(), blockPos.getY()+1, blockPos.getZ());
	            				Block block4 = mc.world.getBlockState(blockPos4).getBlock();
	            				

	            				BlockPos blockPos5 = new BlockPos(blockPos.getX(), blockPos.getY()-9, blockPos.getZ());
	            				Block block5 = mc.world.getBlockState(blockPos4).getBlock();
	            				
	            				if(Zamorozka.settingsManager.getSettingByName("IronOre").getValBoolean()){
	            					if(((Block.getIdFromBlock(block) == 15 && Block.getIdFromBlock(block3) == 15) && Block.getIdFromBlock(block2) == 15)  || (Block.getIdFromBlock(block) == 15 && (Block.getIdFromBlock(block3) == 0))){
	                  					blocklist1.add(blockPos);
	                  				}else{
	                  					blocklist1.remove(blockPos);
	                  				}
	            				}
	            				
	            				if(Zamorozka.settingsManager.getSettingByName("GoldOre").getValBoolean()){
	            					if((Block.getIdFromBlock(block) == 14 && (Block.getIdFromBlock(block4) == 14) && (Block.getIdFromBlock(block3) == 14)&& (Block.getIdFromBlock(block2) == 14)) || (Block.getIdFromBlock(block) == 0 && Block.getIdFromBlock(block4) == 0 && (Block.getIdFromBlock(block3) == 14 && Block.getIdFromBlock(block2) == 0) )){
		                  					blocklist2.add(blockPos);
		                  				}else{
		                  					blocklist2.remove(blockPos);
		                  				}
	            				}
	            				if(Zamorozka.settingsManager.getSettingByName("DimondOre").getValBoolean()){
	            					if((Block.getIdFromBlock(block) == 56 && Block.getIdFromBlock(block5) == 7)) {
		            					if(((Block.getIdFromBlock(block) == 56 && Block.getIdFromBlock(block3) == 56) && Block.getIdFromBlock(block2) == 56)  || (Block.getIdFromBlock(block) == 56 && (Block.getIdFromBlock(block3) == 0) || (Block.getIdFromBlock(block) == 56 && (Block.getIdFromBlock(block4) == 11)))){
		                  					blocklist3.add(blockPos);
		                  				}else{
		                  					blocklist3.remove(blockPos);
		                  				}
	            					}
	            				}

	              			}
	            		}
	            	}
	            	
	        	}else{
	        		if(Zamorozka.settingsManager.getSettingByName("IronOre").getValBoolean()){
		        		for (int i = 0;i<blocklist1.size();i++){
		        				  RenderUtils.drawboxESP5(blocklist1.get(i), Color.pink);	
		        			}
	        		}
	        		if(Zamorozka.settingsManager.getSettingByName("GoldOre").getValBoolean()){
		        		for (int i = 0;i<blocklist2.size();i++){
		  				  RenderUtils.drawboxESP5(blocklist2.get(i), Color.YELLOW);	
		  				 }
	        		}
	        		if(Zamorozka.settingsManager.getSettingByName("DimondOre").getValBoolean()){
		        		for (int i = 0;i<blocklist3.size();i++){
		  				  RenderUtils.drawboxESP5(blocklist3.get(i), Color.BLUE);	
		  				 }
	        		}
	        	}
         
            
        }
    }
    public void onDisable() {
    	timed=0;
    	blocklist1.clear();
    	blocklist2.clear();
    	blocklist3.clear();
    }
}
