package zamorozka.modules.EXPLOITS;

import java.util.List;
import java.util.ArrayList;

import de.Hero.settings.Setting;
import net.minecraft.client.Minecraft;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketConfirmTeleport;
import net.minecraft.network.play.client.CPacketConfirmTransaction;
import net.minecraft.network.play.client.CPacketKeepAlive;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.network.play.client.CPacketPlayerAbilities;
import net.minecraft.network.play.client.CPacketPlayer.Position;
import net.minecraft.network.status.client.CPacketServerQuery;
import zamorozka.event.EventTarget;
import zamorozka.event.events.EventPreMotionUpdates;
import zamorozka.event.events.EventSendPacket;
import zamorozka.main.Zamorozka;
import zamorozka.module.Category;
import zamorozka.module.Module;
import zamorozka.module.ModuleManager;
import zamorozka.ui.MovementUtilis;


public class Disabler extends Module {
	
    long id;
    short tsid;
    int twid;
    int ticks;
    
	public Disabler() {
		super("Disabler", 0, Category.Zamorozka);
	}
	 public static List<Packet> blinkpackets = new ArrayList<>();
    @Override
    public void setup() {
 
        Zamorozka.settingsManager.rSetting(new Setting("OtherPackets", this, true));
        
        
        Zamorozka.settingsManager.rSetting(new Setting("Ground-True", this, false));
        Zamorozka.settingsManager.rSetting(new Setting("Ground-False", this, false));
        Zamorozka.settingsManager.rSetting(new Setting("Ground-Pos-True", this, false));
        
        Zamorozka.settingsManager.rSetting(new Setting("Ground-PosY-True/+", this, 0, 0, 100, true));
        Zamorozka.settingsManager.rSetting(new Setting("Ground-PosY-True/-", this, 0, 0, 100, true));
        
        Zamorozka.settingsManager.rSetting(new Setting("Ground-Pos-False", this, false));
        Zamorozka.settingsManager.rSetting(new Setting("Ground-PosY-False/+", this, 0, 0, 100, true));
        Zamorozka.settingsManager.rSetting(new Setting("Ground-PosY-False/-", this, 0, 0, 100, true));
        
        Zamorozka.settingsManager.rSetting(new Setting("Blink-Tick-Flood", this, false));
       // Zamorozka.settingsManager.rSetting(new Setting("WellmoreDisabler", this, false));
        Zamorozka.settingsManager.rSetting(new Setting("Blink-Ticks", this, 5, 0, 100, true));
        
        Zamorozka.settingsManager.rSetting(new Setting("Blink-Tick-Flood", this, false));
        
        Zamorozka.settingsManager.rSetting(new Setting("NoAbilities", this, true));
    }
	@EventTarget
	public void onPacket(EventSendPacket event) {
		double pposy = Zamorozka.settingsManager.getSettingByName("Ground-PosY-True/+").getValDouble();
		double mposy = Zamorozka.settingsManager.getSettingByName("Ground-PosY-True/-").getValDouble();
		
		double fpposy = Zamorozka.settingsManager.getSettingByName("Ground-PosY-False/+").getValDouble();
		double fmposy = Zamorozka.settingsManager.getSettingByName("Ground-PosY-False/-").getValDouble();
		
		if(Zamorozka.settingsManager.getSettingByName("Ground-True").getValBoolean()){
			mc.player.connection.sendPacket(new CPacketPlayer(true));
		}
		if(Zamorozka.settingsManager.getSettingByName("Ground-False").getValBoolean()){
			mc.player.connection.sendPacket(new CPacketPlayer(false));
		}
		if(Zamorozka.settingsManager.getSettingByName("Ground-Pos-True").getValBoolean()){
			mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY+pposy, mc.player.posZ, true));
		}
		if(Zamorozka.settingsManager.getSettingByName("Ground-Pos-True").getValBoolean()){
			mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY-mposy, mc.player.posZ, true));
		}
		
		if(Zamorozka.settingsManager.getSettingByName("Ground-Pos-False").getValBoolean()){
			mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY+fpposy, mc.player.posZ, false));
		}
		if(Zamorozka.settingsManager.getSettingByName("Ground-Pos-False").getValBoolean()){
			mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY-fmposy, mc.player.posZ, false));
		}
		if(!Zamorozka.settingsManager.getSettingByName("Blink-Tick-Flood").getValBoolean()){
			if(blinkpackets!=null) {
		        for (Packet packet : blinkpackets)
		        	mc.player.connection.sendPacket(packet); 
		        blinkpackets.clear();
			}
		}
	
		}
	/*@EventTarget
	public void onPacket2(EventPreMotionUpdates event) {
		if(Zamorozka.settingsManager.getSettingByName("WellmoreDisabler").getValBoolean() && ModuleManager.getModule(Disabler.class).getState()) {
			if(mc.player.onGround) {
			if(mc.player.ticksExisted%3==0) {
				mc.player.motionY = 0.03f;
			}
		}
		if(mc.player.onGround) {
			mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY - 0.5, mc.player.posZ, false));
		}
		if(!mc.player.onGround) {
			mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY + 0.5, mc.player.posZ, false));
		}
		}
	}*/
   
    @Override
    public void onDisable() {
        for (Packet packet : blinkpackets)
        	mc.player.connection.sendPacket(packet); 
        blinkpackets.clear();
      }
}